<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سجل تواجد المسعفين - وزارة الصحة</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

</head>
<body>
    <div class="container mt-4">
        <!-- Header -->
        <div class="header-section">
            <div class="logo-container">
                <div class="logo-shine"></div>
                <img src="logo.png" alt="شعار وزارة الصحة" class="ministry-logo">
            </div>
            <div class="title-container">
                <h1>
                    <span class="title-highlight">جدول الإسعاف</span>
                    <br>
                    <span class="ministry-name">وزارة الصحة</span>
                </h1>
            </div>
                <div class="admin-controls">
                    <div class="ms-auto">
                        <span class="me-3"><span id="employeeName"></span></span>
                        <a href="index.html" class="btn btn-info-2">
                        <i class="fas fa-clock"></i> العودة للصفحة الرئيسية
                    </a>
                </div>
            </div>
        </div>
</head>
<body>
    <div class="container mt-4">
        <!-- Header -->
        <div class="header-section">
            <h1>سجل تواجد المسعفين</h1>
            <p>وزارة الصحة</p>
        </div>

        <!-- جدول التواجد -->
        <div class="table-responsive mb-5">
            <table class="table table-striped table-bordered align-middle" id="attendanceTable">
                <thead class="table-dark">
                    <tr>
                        <th>اسم المسعف</th>
                        <th>التاريخ</th>
                        <th>اليوم</th>
                        <th>وقت الدخول</th>
                        <th>وقت الخروج</th>
                        <th>إجمالي الساعات</th>
                    </tr>
                </thead>
                <tbody id="attendanceTableBody">
                    <!-- سيتم ملؤه بواسطة الجافاسكربت -->
                </tbody>
            </table>
        </div>

    <script>
        // قائمة المسعفين (يمكن تعديلها لتتناسب مع جدولك)
        const paramedics = [
            { name: 'محمد', id: 'H-60' },
            { name: 'احمد', id: 'H-8' },
            { name: 'ايه', id: 'H-23' }
        ];

        function formatDateTime(date) {
            return date.toLocaleTimeString() + ' - ' + date.toLocaleDateString();
        }

        function getDayName(date) {
            const days = ['الأحد','الإثنين','الثلاثاء','الأربعاء','الخميس','الجمعة','السبت'];
            return days[date.getDay()];
        }

        function loadAttendance() {
            const tbody = document.getElementById('attendanceTableBody');
            tbody.innerHTML = '';

            paramedics.forEach(p => {
                const loginISO = localStorage.getItem(p.id + '_login');
                const logoutISO = localStorage.getItem(p.id + '_logout');
                const hours = localStorage.getItem(p.id + '_hours');

                if (loginISO) {
                    const loginDate = new Date(loginISO);
                    const logoutDate = logoutISO ? new Date(logoutISO) : null;

                    const tr = document.createElement('tr');

                    // اسم المسعف
                    const tdName = document.createElement('td');
                    tdName.textContent = p.name;
                    tr.appendChild(tdName);

                    // التاريخ
                    const tdDate = document.createElement('td');
                    tdDate.textContent = loginDate.toLocaleDateString();
                    tr.appendChild(tdDate);

                    // اليوم
                    const tdDay = document.createElement('td');
                    tdDay.textContent = getDayName(loginDate);
                    tr.appendChild(tdDay);

                    // وقت الدخول
                    const tdIn = document.createElement('td');
                    tdIn.textContent = loginDate.toLocaleTimeString();
                    tr.appendChild(tdIn);

                    // وقت الخروج
                    const tdOut = document.createElement('td');
                    tdOut.textContent = logoutDate ? logoutDate.toLocaleTimeString() : '-';
                    tr.appendChild(tdOut);

                    // إجمالي الساعات
                    const tdHours = document.createElement('td');
                    tdHours.textContent = hours ? hours : '-';
                    tr.appendChild(tdHours);

                    tbody.appendChild(tr);
                }
            });
        }

        window.addEventListener('DOMContentLoaded', loadAttendance);
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
</body>
</html>
