<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>تسجيل الدخول - Ministry</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="d-flex align-items-center justify-content-center" style="height:100vh;">
<div class="card p-4" style="width:360px;">
<h4 class="mb-3">تسجيل دخول المسعف</h4>
<div class="mb-2"><input id="inputId" class="form-control" placeholder="ID المستخدم"></div>
<div class="mb-3"><input id="inputCode" class="form-control" placeholder="Code (مثال H-1)"></div>
<button id="loginBtn" class="btn btn-primary w-100">دخول</button>
<div id="loginMsg" class="mt-3"></div>
</div>


<script type="module">
import { verifyUser } from './database.js';
document.getElementById('loginBtn').addEventListener('click', async ()=>{
const id = document.getElementById('inputId').value.trim();
const code = document.getElementById('inputCode').value.trim();
const msg = document.getElementById('loginMsg');
if(!id || !code){ msg.innerText = 'الرجاء إدخال ID و Code'; return; }
msg.innerText = 'جاري التحقق...';
const res = await verifyUser(id, code);
if(res && res.length===1){
// حفظ بيانات المستخدم في sessionStorage للصفحات الأخرى
sessionStorage.setItem('employeeData', JSON.stringify(res[0]));
window.location.href = 'index.html';
} else {
msg.innerText = 'ID أو Code غير صحيح أو الحساب غير نشط';
}
});
</script>
</body>
</html>